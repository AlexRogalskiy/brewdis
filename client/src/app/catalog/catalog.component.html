<form #searchForm="ngForm" (ngSubmit)="search()" class="search-form">
	<div fxLayout="row" fxLayoutAlign="space-evenly">
		<mat-form-field fxFlex="25">
			<mat-label>Category</mat-label>
			<mat-select [formControl]="categoryField">
				<mat-option *ngFor="let category of categories" [value]="category.id">{{category.name}}</mat-option>
			</mat-select>
		</mat-form-field>
		<mat-form-field fxFlex="15">
			<mat-label>Style</mat-label>
			<mat-select [formControl]="styleField">
				<mat-option *ngFor="let style of styles" [value]="style.id">{{style.name}}</mat-option>
			</mat-select>
		</mat-form-field>
		<mat-form-field fxFlex="15" hintLabel="Type a few characters">
			<input matInput placeholder="Brewery" aria-label="Brewery" [matAutocomplete]="auto"
				[formControl]="breweryField">
			<mat-autocomplete #auto="matAutocomplete" [displayWith]="displayBrewery"
				(optionSelected)='brewerySelected($event.option.value)'>
				<mat-option *ngFor="let brewery of breweries" [value]="brewery">
					<img class="brewery-img" aria-hidden [src]="brewery.icon" height="25">
					<span>{{brewery.name}}</span>
				</mat-option>
			</mat-autocomplete>
		</mat-form-field>
		<mat-form-field fxFlex="10">
			<mat-label>ABV</mat-label>
			<mat-select [formControl]="abvField">
				<mat-option value="0-3">0 - 3%</mat-option>
				<mat-option value="3-5">3 - 5%</mat-option>
				<mat-option value="5-7">5 - 7%</mat-option>
				<mat-option value="7-9">7 - 9%</mat-option>
				<mat-option value="9-11">9 - 11%</mat-option>
				<mat-option value="11-15">11 - 15%</mat-option>
				<mat-option value="15-100">> 15%</mat-option>
			</mat-select>
		</mat-form-field>
		<mat-form-field fxFlex="10">
			<mat-label>IBU</mat-label>
			<mat-select [formControl]="ibuField">
				<mat-option value="0-10">0 - 10</mat-option>
				<mat-option value="10-20">10 - 20</mat-option>
				<mat-option value="20-30">20 - 30</mat-option>
				<mat-option value="30-50">30 - 50</mat-option>
				<mat-option value="50-90">50 - 90</mat-option>
				<mat-option value="90-120">90 - 120</mat-option>
				<mat-option value="120-inf">> 120</mat-option>
			</mat-select>
		</mat-form-field>
		<mat-form-field fxFlex="10">
			<mat-label>Label</mat-label>
			<mat-select [formControl]="labelField">
				<mat-option value="all">All</mat-option>
				<mat-option value="required">Required</mat-option>
			</mat-select>
		</mat-form-field>
	</div>
	<div fxLayout="row" fxLayoutAlign="space-evenly">
		<mat-form-field hintLabel="Keywords to search for, e.g. hoppy" fxFlex="60">
			<input matInput placeholder="Query" [formControl]="searchField">
		</mat-form-field>
		<mat-form-field fxFlex="10">
			<mat-label>Sort by</mat-label>
			<mat-select [(value)]="sortByField">
				<mat-option value="name">Beer Name</mat-option>
				<mat-option value="abv">ABV</mat-option>
				<mat-option value="ibu">IBU</mat-option>
			</mat-select>
		</mat-form-field>
		<mat-form-field fxFlex="10">
			<mat-select [(value)]="sortByDirection">
				<mat-option value="Ascending">Ascending</mat-option>
				<mat-option value="Descending">Descending</mat-option>
			</mat-select>
		</mat-form-field>
		<button mat-raised-button color="primary" type="submit" fxFlex="10" class="submit">Submit</button>
	</div>
</form>
<br>

<mat-grid-list cols="5" rowHeight="16:26">
	<mat-grid-tile *ngFor="let product of results | async">
		<mat-card class="product-card">
			<mat-card-header>
				<mat-card-title class="product-name" [innerHTML]="product.name"></mat-card-title>
				<mat-card-subtitle [innerHTML]="product.breweryName"></mat-card-subtitle>
			</mat-card-header>
			<img mat-card-image class="product-label"
				src="{{ product.hasOwnProperty('labels.medium') ? product['labels.medium'] : 'assets/brewdis.svg' }}"
				alt="{{product.name}}">
			<mat-card-content>
				<p class="product-detail">ABV: {{product.abv}}% &nbsp; &nbsp; IBU: {{product.ibu}}</p>
			</mat-card-content>
			<mat-card-actions align="end">
				<button mat-mini-fab (click)="openDescriptionDialog(product)" class="action-button">
					<mat-icon>description</mat-icon>
				</button>
				<button mat-mini-fab [disabled]="product.added" (click)="addProduct(product)" class="action-button">
					<mat-icon>playlist_add</mat-icon>
				</button>
				<button mat-mini-fab [routerLink]="['/availability', product.sku]">
					<mat-icon>map</mat-icon>
				</button>
			</mat-card-actions>
		</mat-card>
	</mat-grid-tile>
</mat-grid-list>